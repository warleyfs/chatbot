<nb-layout>
  <nb-layout-header fixed class="toolbar">
    <button class="menu-button" nbButton size="large" (click)="toggle()">
      <nb-icon class="menu-button-icon" icon="menu-outline"></nb-icon>
    </button>
    
    <img width="40" alt="Logo Itaú" src="../assets/logo-itau.png" />
    
    <nb-form-field class="search-box-holder">
      <input type="text" nbInput fullWidth fieldSize="tiny" class="search-box" placeholder="Busque por cartão, extrato, comprovantes...">
      <nb-icon nbSuffix icon="search-outline" pack="eva"></nb-icon>
    </nb-form-field>

    <div class="spacer"></div>
    
    <a aria-label="Angular on twitter" target="_blank" rel="noopener" href="https://twitter.com/angular"
      title="Twitter">
      <svg id="twitter-logo" height="24" data-name="Logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400">
        <rect width="400" height="400" fill="none" />
        <path
          d="M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23"
          fill="#fff" />
      </svg>
    </a>
    
    <a aria-label="Angular on YouTube" target="_blank" rel="noopener" href="https://youtube.com/angular"
      title="YouTube">
      <svg id="youtube-logo" height="24" width="24" data-name="Logo" xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24" fill="#fff">
        <path d="M0 0h24v24H0V0z" fill="none" />
        <path
          d="M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z" />
      </svg>
    </a>
  </nb-layout-header>

  <nb-layout-column class="tracking">

    <div class="stepper" *ngIf="!showResume">
      <nb-stepper orientation="vertical" [selectedIndex]="currentStep" disableStepNavigation>
        <nb-step [label]="label1" [completed]="step1Completed">
          <ng-template #label1>
            <div [class]="getStepCompletionStatusClass(0)">
              <label>Passo 1</label>
              <br>
              <label>Análise de crédito</label>
            </div>
          </ng-template>
        </nb-step>
        <nb-step [label]="label2" [completed]="step2Completed">
          <ng-template #label2>
            <div [class]="getStepCompletionStatusClass(1)">
              <label>Passo 2</label>
              <br>
              <label>Formulários</label>
            </div>
          </ng-template>
        </nb-step>
        <nb-step [label]="label3" [completed]="step3Completed">
          <ng-template #label3>
            <div [class]="getStepCompletionStatusClass(2)">
              <label>Passo 3</label>
              <br>
              <label>Envio de documentação e avaliação</label>
            </div>
          </ng-template>
        </nb-step>
        <nb-step [label]="label4" [completed]="step4Completed">
          <ng-template #label4>
            <div [class]="getStepCompletionStatusClass(3)">
              <label>Passo 4</label>
              <br>
              <label>Confirmação de dados</label>
            </div>
          </ng-template>
        </nb-step>
        <nb-step [label]="label5" [completed]="step5Completed">
          <ng-template #label5>
            <div [class]="getStepCompletionStatusClass(4)">
              <label>Passo 5</label>
              <br>
              <label>Liberação de crédito</label>
            </div>
          </ng-template>
        </nb-step>
      </nb-stepper>
    </div>

    <div class="resume" *ngIf="!showResume">
      <nb-card class="card-container">
        <nb-card-body class="card-body">
          <label class="resume-item-title">Valor do imóvel</label>
          <label class="resume-item-value">R$ 100.000,00</label>
        </nb-card-body>
      </nb-card>
      <nb-card class="card-container">
        <nb-card-body class="card-body">
          <label class="resume-item-title">Valor do crédito</label>
          <label class="resume-item-value">R$ 58.000,00</label>
        </nb-card-body>
      </nb-card>
      <nb-card class="card-container">
        <nb-card-body class="card-body">
          <label class="resume-item-title">Prazo</label>
          <label class="resume-item-value">240 meses</label>
        </nb-card-body>
      </nb-card>
      <nb-card class="card-container">
        <nb-card-body class="card-body">
          <label class="resume-item-title">Taxa de juros</label>
          <label class="resume-item-value">23,90% a.a.</label>
        </nb-card-body>
      </nb-card>
    </div>

    <div class="attached-files" *ngIf="!showResume">
      <button nbButton class="btn-attached-files" status="primary">arquivo anexado visualizar</button>
    </div>
    
    <div class="resume-content" *ngIf="showResume">
      <nb-card>
        <nb-card-header class="resume-contet-header">
          <nb-icon class="menu-button-icon" icon="menu-2-outline"></nb-icon>
          Resumo
        </nb-card-header>
        <nb-card-body>
          <div *ngFor="let resumeItem of resumeData" class="resume-data">
            <label class="resume-item-value">{{resumeItem.title}}</label>
            <br>
            <label class="resume-item-title">{{resumeItem.value}}</label>
          </div>
        </nb-card-body>
      </nb-card>
    </div>

    <div class="resume-button">
      <button nbButton class="btn-resume" status="primary" (click)="toggleResume()" *ngIf="!showResume">ver resumo</button>
      <button nbButton class="btn-resume" status="primary" (click)="toggleResume()" *ngIf="showResume">ver tracking</button>
    </div>
  </nb-layout-column>

  <nb-layout-column class="chatbot">
    <!-- <nb-chat title="Assistente virtual Itaú" size="giant" status="primary">
      <nb-chat-message *ngFor="let msg of messages" [type]="msg.type" [message]="msg.text" [reply]="msg.reply"
        [sender]="msg.user.name" [date]="msg.date" [files]="msg.files" [quote]="msg.quote" [latitude]="msg.latitude"
        [longitude]="msg.longitude" [avatar]="msg.user.avatar">
      </nb-chat-message>
      <nb-chat-form (send)="sendMessage($event)" [dropFiles]="true">
      </nb-chat-form>
    </nb-chat> -->
    <div class="chatform">
      <div class="chat-header">
        <img width="40" alt="Avatar Itaú" src="../assets/itau-avatar.png" />
        <label>Assistente Virtual CGI</label>
      </div>
      <message-list [messages]="messages" (sendSimpleMessage)="sendUserOptionMessage($event)"></message-list>
      <message-form [userMessage]="userMessage" [messages]="messages"></message-form>
    </div>
  </nb-layout-column>
</nb-layout>

<router-outlet></router-outlet>